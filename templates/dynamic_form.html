<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>{{ form_name }}</title>
  <style>
    body {
      font-family:"Microsoft YaHei", sans-serif;
      background:#f7f7f7;
      margin:20px;
    }
    h1 {
      text-align:center;
      font-weight:900;
      margin-bottom:20px;
      font-size:28px;
    }
    form {
      max-width:900px;
      margin:0 auto;
    }
    .section {
      background:#fff;
      border-radius:10px;
      box-shadow:0 4px 10px rgba(0,0,0,.08);
      padding:20px;
      margin-bottom:20px;
    }
    .section h2 {
      font-size:18px;
      font-weight:700;
      margin-bottom:15px;
    }
    label {
      font-weight:700;
      display:block;
      margin-top:12px;
    }
    input, textarea, select {
      width:100%;
      padding:10px;
      border:1px solid #ccc;
      border-radius:6px;
      font-family:inherit;
    }
    textarea { resize:vertical; min-height:100px; }
    button {
      display:block;
      width:100%;
      margin-top:20px;
      padding:14px;
      background:#2563eb;
      color:white;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-weight:700;
      font-size:16px;
    }
    button:hover { background:#1d4ed8; }
  </style>
</head>
<body>
  <h1>📋 {{ form_name }}</h1>
  <form method="post" enctype="multipart/form-data">

    <!-- 固定部分：申请人信息 -->
    <div class="section">
      <h2>🧑 申请人信息</h2>
      <label>姓名 * <input type="text" name="name" required></label>
      <label>联系方式 * <input type="text" name="phone" required></label>
      <label>电子邮箱 * <input type="email" name="email" required></label>
      <label>所属团契/小组 * <input type="text" name="group_name" required></label>
    </div>

    <!-- 固定部分：活动信息 -->
    <div class="section">
      <h2>📅 活动信息</h2>
      <label>活动名称 * <input type="text" name="event_name" required></label>
      <label>活动地点 * <input type="text" name="location" required></label>
      <label>开始日期 * <input type="date" name="start_date" required></label>
      <label>结束日期 * <input type="date" name="end_date" required></label>
      <label>开始时间 * <input type="time" name="start_time" required></label>
      <label>结束时间 * <input type="time" name="end_time" required></label>
      <label>预计参与人数 * <input type="number" name="participants" min="1" required></label>
      <label>活动性质 *
        <select name="event_type" required>
          <option>聚会</option>
          <option>比赛</option>
          <option>演出</option>
          <option>其他</option>
        </select>
      </label>
    </div>

    <!-- 动态生成问题 -->
    {% for field in schema.fields %}
    <div class="section">
      <label>{{ field.label }} {% if field.required %}*{% endif %}</label>
      {% if field.type == "text" %}
        <input type="text" name="q{{ loop.index }}" {% if field.required %}required{% endif %}>
      {% elif field.type == "textarea" %}
        <textarea name="q{{ loop.index }}" {% if field.required %}required{% endif %}></textarea>
      {% elif field.type == "email" %}
        <input type="email" name="q{{ loop.index }}" {% if field.required %}required{% endif %}>
      {% elif field.type == "number" %}
        <input type="number" name="q{{ loop.index }}" {% if field.required %}required{% endif %}>
      {% elif field.type == "date" %}
        <input type="date" name="q{{ loop.index }}" {% if field.required %}required{% endif %}>
      {% elif field.type == "time" %}
        <input type="time" name="q{{ loop.index }}" {% if field.required %}required{% endif %}>
      {% elif field.type == "radio" %}
        {% for opt in field.options %}
          <label><input type="radio" name="q{{ loop.index }}" value="{{ opt }}" {% if field.required %}required{% endif %}> {{ opt }}</label><br>
        {% endfor %}
      {% elif field.type == "checkbox" %}
        {% for opt in field.options %}
          <label><input type="checkbox" name="q{{ loop.index }}[]" value="{{ opt }}"> {{ opt }}</label><br>
        {% endfor %}
      {% elif field.type == "select" %}
        <select name="q{{ loop.index }}" {% if field.required %}required{% endif %}>
          {% for opt in field.options %}
            <option>{{ opt }}</option>
          {% endfor %}
        </select>
      {% elif field.type == "file" %}
        <input type="file" name="q{{ loop.index }}" {% if field.required %}required{% endif %}>
      {% endif %}
    </div>
    {% endfor %}

    <button type="submit">✅ 提交表单</button>
  </form>
</body>
</html>
