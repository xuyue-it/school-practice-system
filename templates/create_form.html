<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>åˆ›å»ºæ–°è¡¨å•</title>
  <style>
    body {
      font-family: "Microsoft YaHei", sans-serif;
      background:#f7f9fc;
      margin:0;
      padding:20px;
    }
    .container {
      max-width:900px;
      margin:0 auto;
    }
    .card {
      background:#fff;
      border-radius:12px;
      padding:24px;
      margin-bottom:20px;
      box-shadow:0 4px 16px rgba(0,0,0,.08);
    }
    h1 {
      text-align:center;
      font-weight:900;
      margin-bottom:24px;
    }
    label {
      font-weight:700;
      display:block;
      margin:12px 0 6px;
    }
    input, select {
      width:100%;
      padding:10px;
      border:1px solid #ccc;
      border-radius:6px;
      font-family:inherit;
    }
    .question-card {
      border:1px solid #e5e7eb;
      border-radius:8px;
      padding:16px;
      margin:12px 0;
      background:#f9fafb;
      position:relative;
    }
    .remove-btn {
      position:absolute;
      top:10px;
      right:10px;
      background:#ef4444;
      color:#fff;
      border:none;
      padding:6px 10px;
      border-radius:6px;
      cursor:pointer;
    }
    .remove-btn:hover { background:#dc2626; }
    .add-btn, .submit-btn {
      margin-top:20px;
      padding:12px 20px;
      background:#2563eb;
      color:white;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-weight:700;
    }
    .add-btn:hover, .submit-btn:hover {
      background:#1d4ed8;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>ğŸ“ åˆ›å»ºæ–°è¡¨å•</h1>
      <form method="post" id="createForm">
        <!-- è¡¨å•åç§° -->
        <label>è¡¨å•åç§° *</label>
        <input type="text" name="name" required placeholder="ä¾‹å¦‚ï¼šæ´»åŠ¨ç”³è¯·è¡¨">

        <!-- ç½‘ç«™å -->
        <label>ç½‘ç«™å *</label>
        <input type="text" name="site_name" required placeholder="ä¾‹å¦‚ï¼ševent2025">

        <!-- åŠ¨æ€é—®é¢˜ -->
        <h3 style="margin-top:20px;">è¡¨å•é—®é¢˜</h3>
        <div id="questions"></div>
        <button type="button" class="add-btn" onclick="addQuestion()">â• æ·»åŠ é—®é¢˜</button>

        <!-- éšè— JSON å­—æ®µ -->
        <input type="hidden" name="schema_json" id="schema_json">

        <button type="submit" class="submit-btn">âœ… åˆ›å»ºè¡¨å•</button>
      </form>
    </div>
  </div>

  <script>
    function addQuestion() {
      const container = document.getElementById("questions");
      const qIndex = container.children.length;

      const div = document.createElement("div");
      div.className = "question-card";
      div.innerHTML = `
        <button type="button" class="remove-btn" onclick="this.parentElement.remove()">âœ– åˆ é™¤</button>
        <label>é—®é¢˜æ ‡é¢˜ *</label>
        <input type="text" class="q-label" placeholder="ä¾‹å¦‚ï¼šå§“å" required>
        <label>å­—æ®µå *</label>
        <input type="text" class="q-name" placeholder="ä¾‹å¦‚ï¼šname" required>
        <label>é¢˜å‹ *</label>
        <select class="q-type">
          <option value="text">å•è¡Œæ–‡æœ¬</option>
          <option value="textarea">å¤šè¡Œæ–‡æœ¬</option>
          <option value="number">æ•°å­—</option>
          <option value="date">æ—¥æœŸ</option>
          <option value="radio">å•é€‰</option>
          <option value="checkbox">å¤šé€‰</option>
          <option value="file">æ–‡ä»¶ä¸Šä¼ </option>
        </select>
        <label>æ˜¯å¦å¿…å¡«</label>
        <select class="q-required">
          <option value="true">æ˜¯</option>
          <option value="false">å¦</option>
        </select>
      `;
      container.appendChild(div);
    }

    document.getElementById("createForm").addEventListener("submit", function(e) {
      const questions = [];
      document.querySelectorAll(".question-card").forEach(card => {
        questions.push({
          label: card.querySelector(".q-label").value,
          name: card.querySelector(".q-name").value,
          type: card.querySelector(".q-type").value,
          required: card.querySelector(".q-required").value === "true"
        });
      });
      document.getElementById("schema_json").value = JSON.stringify({fields: questions});
    });
  </script>
</body>
</html>
